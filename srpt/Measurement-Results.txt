Setup details
=============

Initiator system hardware:
* IB HCA: QDR Mellanox ConnectX MT26428
* CPU: Intel Core2 Duo E6750 @ 2.66 GHz.

Initiator system hardware configuration:
* CPU frequency scaling was disabled.
* IRQ affinity for mlx4_core: not bound to a CPU core (smp_affinity=3).

Initiator system software:
* Kernel 2.6.34

Initiator system software configuration:
* Runlevel: 3.
* SRP initiator was loaded with parameter srp_sg_tablesize=128.
* SRP initiator block device I/O scheduler: noop.

Target system hardware:
* IB HCA: QDR Mellanox ConnectX MT26428
* CPU: Intel Core2 Duo E8400 @ 3.00 GHz.

Target system hardware configuration:
* CPU frequency scaling was disabled.
* IRQ affinity for mlx4-comp-0: not bound to a CPU core (smp_affinity=3).

Target system software:
* 2.6.34 kernel with SCST patches applied and with kernel debugging disabled.
* Mainstream kernel InfiniBand drivers (no OFED).
* SCST revision 1721 built in release mode (make debug2release) and
  with SCST_MAX_TGT_DEV_COMMANDS equal to 48.

Target system software configuration:
* Runlevel: 3.
* ib_srpt kernel module was loaded with the parameter thread=0.
* A 1 GB file residing on a tmpfs filesystem was exported towards the
  initiator system.


Measurement results
===================

+ blockdev-perftest -f -d -s 30 -m 12 /dev/sdb
blocksize        W        W        W   W(avg,   W(std,        W        R        R        R   R(avg,   R(std,        R
  (bytes)      (s)      (s)      (s)    MB/s)    MB/s)   (IOPS)      (s)      (s)      (s)    MB/s)    MB/s)   (IOPS)
 67108864    0.986    1.007    0.984 1031.838   10.783   16.122    0.359    0.359    0.359 2850.743    1.071   44.543
 33554432    1.101    1.114    1.112  923.379    4.761   28.856    0.502    0.502    0.503 2038.166    2.598   63.693
 16777216    1.216    1.226    1.204  842.682    6.055   52.668    0.623    0.622    0.622 1645.080    1.615  102.818
  8388608    1.146    1.152    1.149  891.503    1.876  111.438    0.648    0.646    0.648 1581.660    1.889  197.707
  4194304    1.050    1.066    1.060  967.383    6.281  241.846    0.703    0.770    0.709 1410.098   57.053  352.525
  2097152    1.060    1.066    1.059  964.409    2.948  482.205    0.717    0.716    0.715 1430.388    1.817  715.194
  1048576    1.262    1.273    1.272  807.054    3.075  807.054    0.872    0.873    0.868 1175.494    3.133 1175.494
   524288    1.484    1.483    1.487  689.674    0.692 1379.349    1.043    1.035    1.036  986.290    3.388 1972.580
   262144    1.625    1.628    1.629  629.392    0.652 2517.566    1.108    1.109    1.108  923.782    0.470 3695.129
   131072    1.757    1.762    1.757  582.342    0.738 4658.735    1.242    1.237    1.236  826.764    1.839 6614.112
    65536    2.174    2.186    2.184  469.419    1.133 7510.702    1.548    1.545    1.551  661.468    1.038 10583.481
    32768    2.922    2.916    2.906  351.314    0.823 11242.038    2.177    2.183    2.169  470.513    1.275 15056.420
    16384    4.381    4.473    4.353  232.643    2.688 14889.181    3.376    3.362    3.363  304.125    0.572 19464.030
     8192    7.364    7.458    7.333  138.664    0.990 17748.980    5.787    5.778    5.783  177.077    0.117 22665.794
     4096   13.005   13.063   12.938   78.758    0.308 20161.974   10.278   10.309   10.333   99.356    0.216 25435.107

+ blockdev-perftest -f -a -s 30 -m 12 /dev/sdb
blocksize        W        W        W   W(avg,   W(std,        W        R        R        R   R(avg,   R(std,        R
  (bytes)      (s)      (s)      (s)    MB/s)    MB/s)   (IOPS)      (s)      (s)      (s)    MB/s)    MB/s)   (IOPS)
 67108864    1.840    1.845    1.901  549.996    8.134    8.594    1.399    1.405    1.405  729.861    1.651   11.404
 33554432    1.824    1.913    1.834  551.753   11.648   17.242    1.402    1.401    1.404  730.210    0.678   22.819
 16777216    1.905    1.840    1.859  548.221    7.963   34.264    1.400    1.399    1.400  731.493    0.190   45.718
  8388608    1.838    1.861    1.857  552.961    2.937   69.120    1.390    1.393    1.387  736.590    1.285   92.074
  4194304    1.817    1.821    1.874  557.536    7.809  139.384    1.314    1.319    1.306  779.914    3.135  194.978
  2097152    1.601    1.625    1.595  637.189    5.130  318.594    1.212    1.226    1.217  840.336    3.927  420.168
  1048576    1.283    1.302    1.284  793.881    5.290  793.881    1.088    1.075    1.079  947.361    4.666  947.361
   524288    1.216    1.201    1.130  866.816   28.189 1733.632    1.052    1.039    1.042  980.319    5.174 1960.639
   262144    1.117    1.118    1.143  909.765    9.544 3639.061    1.040    1.038    1.038  986.136    0.777 3944.545
   131072    1.219    1.196    1.197  850.364    7.473 6802.915    1.044    1.038    1.038  984.683    2.730 7877.463
    65536    1.137    1.132    1.118  906.802    6.416 14508.826    1.039    1.040    1.041  984.600    0.777 15753.604
    32768    1.130    1.171    1.135  894.261   14.332 28616.358    1.054    1.045    1.059  972.685    5.233 31125.913
    16384    1.202    1.152    1.127  883.139   23.630 56520.877    1.056    1.052    1.054  971.575    1.233 62180.828
     8192    1.135    1.143    1.219  879.449   28.123 112569.536    1.059    1.064    1.061  964.576    1.912 123465.788
     4096    1.177    1.179    1.173  870.666    1.931 222890.547    1.097    1.092    1.095  935.370    1.489 239454.732

+ blockdev-perftest -f -j -d -s 30 -m 12 /dev/sdb
blocksize        W        W        W   W(avg,   W(std,        W        R        R        R   R(avg,   R(std,        R
  (bytes)      (s)      (s)      (s)    MB/s)    MB/s)   (IOPS)      (s)      (s)      (s)    MB/s)    MB/s)   (IOPS)
 67108864    0.459    0.454    0.456 2244.019   10.094   35.063    0.358    0.356    0.357 2868.362    6.560   44.818
 33554432    0.565    0.568    0.567 1807.068    3.981   56.471    0.495    0.495    0.494 2070.083    1.974   64.690
 16777216    0.716    0.717    0.716 1429.503    0.940   89.344    0.611    0.609    0.611 1677.776    2.595  104.861
  8388608    0.733    0.735    0.735 1394.464    1.792  174.308    0.632    0.635    0.635 1615.150    3.608  201.894
  4194304    0.755    0.767    0.756 1348.620    9.608  337.155    0.652    0.652    0.649 1572.972    3.422  393.243
  2097152    0.810    0.815    0.817 1258.002    4.557  629.001    0.688    0.689    0.687 1488.374    1.766  744.187
  1048576    0.940    0.964    0.936 1081.873   14.012 1081.873    0.811    0.824    0.818 1252.397    8.142 1252.397
   524288    1.214    1.218    1.222  840.729    2.254 1681.457    0.992    1.015    1.007 1019.336    9.706 2038.671
   262144    1.320    1.351    1.359  762.403    9.617 3049.613    1.084    1.092    1.111  934.690    9.615 3738.761
   131072    1.531    1.535    1.530  668.409    0.942 5347.269    1.259    1.254    1.254  815.506    1.529 6524.047
    65536    1.935    1.941    1.942  528.018    0.843 8448.285    1.622    1.624    1.621  631.190    0.485 10099.040
    32768    2.733    2.749    2.728  374.182    1.222 11973.819    2.280    2.256    2.265  451.707    1.970 14454.620
    16384    4.292    4.327    4.321  237.406    0.843 15194.009    3.600    3.572    3.579  285.744    0.947 18287.616
     8192    7.455    7.564    7.499  136.429    0.813 17462.917    6.244    6.180    6.182  165.112    0.788 21134.311
     4096   13.539   13.577   13.631   75.393    0.209 19300.515   11.060   11.142   11.065   92.345    0.312 23640.274

+ blockdev-perftest -f -j -a -s 30 -m 12 /dev/sdb
blocksize        W        W        W   W(avg,   W(std,        W        R        R        R   R(avg,   R(std,        R
  (bytes)      (s)      (s)      (s)    MB/s)    MB/s)   (IOPS)      (s)      (s)      (s)    MB/s)    MB/s)   (IOPS)
 67108864    1.330    1.327    1.323  771.863    1.669   12.060    1.243    1.250    1.247  821.395    1.890   12.834
 33554432    1.325    1.332    1.328  770.894    1.663   24.090    1.248    1.247    1.250  820.295    0.819   25.634
 16777216    1.324    1.332    1.324  771.866    2.190   48.242    1.247    1.246    1.245  821.830    0.539   51.364
  8388608    1.324    1.323    1.352  768.270    7.692   96.034    1.231    1.234    1.234  830.496    0.953  103.812
  4194304    1.314    1.329    1.328  773.629    4.017  193.407    1.151    1.140    1.143  894.598    3.621  223.650
  2097152    1.367    1.319    1.413  750.044   21.095  375.022    1.041    1.031    1.027  991.320    5.635  495.660
  1048576    1.276    1.290    1.294  795.884    4.790  795.884    0.907    0.895    0.895 1139.088    7.136 1139.088
   524288    1.137    1.131    1.134  903.002    1.951 1806.005    0.881    0.881    0.892 1157.538    6.757 2315.075
   262144    1.111    1.139    1.122  911.127    9.313 3644.510    0.884    0.880    0.880 1161.881    2.482 4647.525
   131072    1.060    1.076    1.119  944.271   21.443 7554.169    0.821    0.818    0.815 1251.845    3.749 10014.760
    65536    1.073    1.094    1.087  944.130    7.623 15106.083    0.826    0.828    0.825 1239.212    1.869 19827.395
    32768    1.114    1.125    1.131  911.609    5.725 29171.474    0.847    0.847    0.847 1208.973    0.000 38687.131
    16384    1.188    1.193    1.196  858.827    2.379 54964.917    0.881    0.882    0.881 1161.876    0.621 74360.082
     8192    1.327    1.400    1.413  742.598   20.737 95052.510    0.999    0.990    0.982 1034.046    7.247 132357.902
     4096    1.626    1.635    1.636  627.328    1.731 160595.871    1.179    1.181    1.185  866.576    1.828 221843.583
